title: Android 编程规范
date: 2016-08-13 14:17:51
tags: Android
---
从做一名程序员到成为一名项目经理，代码是抬头不见低头见。有时出现隔天无法操作自己代码，需要重新分析甚至重新重构来熟悉；有时团队成员离职需要代码移交，后者阅读代码效率低下、代码移交成效很差，更别提后期继续维护，通常有脾气的开发者会自己通过加班的形式重新编写前任代码。从这些种种作为当初的程序员和现在的项目经理来看简直是噩梦，代码阅读性和可扩展性不是一蹴而就，需要循序渐进的检索和重构，但代码按照团队或多人共识的代码规范进行编写，这对于个人或团队交叉编程时代码识别降低难度。



每个公司都有自己的一套代码编程规范，审核一个程序员的编程水平，代码命名和代码结构将是其中一大要素。

``` Text
  代码规范分为命名、结构、注解
```

### 代码命名
代码命名是国内开发者比较头痛的一件事，曾经出现一些用中文拼音来命名，出了不少搞笑的事迹。代码中应该除注释和硬编码之外的其他地方不能出现任何中文，保持代码的简洁和优美。

#### 1. 命名方式
* 驼峰式命名法
当变量名或函式名是由一个或多个单词连结在一起，而构成的唯一识别字时，第一个单词以小写字母开始；第二个单词的首字母大写或每一个单词的首字母都采用大写字母，一般用于变量，常量，资源命名，ID命名等

* 帕斯卡命名法
其实就是大驼峰命名法，区别是第一个单词的首字母大写，一般应用于类名，接口名。


#### 2. 约定优于配置
这个概念是在很多书籍中都有提到，往往合作开发常出现沟通问题，造成不必要的时间浪费甚至出现相互抵触，为了减少这样的事情出现，建立大家共识的一些缩写标识。如下：

|名称|缩写|描述|
| :--: |:--:|:--:|
|icon|ic|APP的启动图标|
|average|avg|XX平均值|
|background|bg|XX背景|
|buffer|buf|XX缓存|
|control|ctrl|XX控制|
|delete|del|删除|
|document|doc|文档|
|error|err|错误|
|infomation|info|信息|
|initial|init|初始化|
|image|img|图片|
|length|len|长度|
|library|lib|库|
|message|msg|消息|
|password|pwd|密码|
|string|str|字符串|
|temp|tmp|临时|
|button|btn|按钮|
|imageView|iv|图片View|
|dialog|dlg|弹出框|
|animation|anim|动画|
``` Text
  ！注意：程序中使用单词缩写原则，不要用缩写，除非该缩写是约定俗成的
```
#### 3. 命名规范
通常Android或Java开发者需要命名的位置包括：类、方法、接口、包、变量、常量、文件、资源ID
1. 包名
首先包名采用域名倒过来进行命名，即“com.xxx”。项目中需要将不同代码和文件分类进行管理，因此包名应该继续细分"com.xxx.functions"。在Android开发中通常包括以下分类：

|命名|分类|
| :--: | :--: |
|activities| 界面集，所有的用户界面|
|fragments| 界面集，所有的用户片段界面|
|adapters| 页面用到的Adapter类 (适配器的类)|
|common| 基础内容，公共共享|
|tools| 工具相关，独立存在|
|entities| 项目实体集|
|db| 数据持久层操作|
|view| 所用到所有第三方自定义View、与View操作相关的功能|
|service| 系统后台服务层|
|broadcast| 系统广播集|
|dialogs| 所有弹出提示框|
|push| 与推送相关|
|net| 与网络相关|

2. 类名和接口
采用帕斯卡命名法，尽量避免缩写，缩写容易带来阅读歧义。如“LoginActivity, LoadService, UserAdapter, TimeBroadcast”等。

3. 方法名
根据Java说法，“万物皆对象”。那么对象中的方法即是可执行的动作，因此通常方法名都是采用动词命名，所以有一种说法，找一个对象中的方法就去找这个对象中出现了那些动词。如“onCreate, onIntercepter”都采用小驼峰标识方法。

4. 变量
采用小驼峰标识方法，一般要尽量让大家能够识别到具体意识，在android中通常变量采用以"m"开头命名，这样防止set方法带来的变量名称相同造成不必要的麻烦。如“setName”中变量名和参数名相同。

5. 常量
提示，所有字母全部大写，每个单词之间用“\_”来进行分开。如“CONFIG_IP, PORT”

6. 资源ID
在android中这种ID比较多，布局文件、图片文件、动画文件、普通文件、硬编码字符串、硬编码数字、硬编码颜色值等。采用两大原则：

 * 使用缩写前缀_功能标识_状态，如“btn_save, iv_picture, ic_launcher, iv_login_pressed”通常用于图片、动画文件。

 * 直接使用功能_类型, 如“login_layout, bg_color, login_label, login_successful_tips”通常用于硬编码、布局文件，普通文件

7. 其他规范

 * 每个方法的代码量不能超过50行
 * 每行代码字母数不能超过80个字符
 * 所有代码位置需要遵照JavaDoc编写注释
 * 硬编码内容需要通过通配符来进行拼接
 * 输入数据都需要检验才使用
 * 尽量采用.9图片文件或尽量分割图片重复使用
 * 服务器能够实现则不要客户端实现
 * 日志打印需要体现模块和方法以及描述

### 代码结构
默认Android工程采用的MVC结构，先比较流行MVP和MVVP结构，可建立一套MVP模板用于全公司使用，同时配套MVP每个模块以及如何使用，具体可查看MVP的相关知识。

### 代码注释
JavaDoc中明确提出在包、类、接口、方法、变量、常量等位置进行注解，以方便通过工具生成doc文件。因此只需要所有人按照javadoc方式编写即可，不需要单独在定义一套方法。

### 最后

编码的优美不在于规矩限制，在于个人自觉遵守，以高标准要求自己，循序渐进写出高逼格、阅读性强、质量高、可追踪、可扩展的优质代码。个人能力尚欠，期望总结这些对大家有用。
